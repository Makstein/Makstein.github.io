---
title: UE5 IK重定向动画的骨骼平移选项
date: 2024-09-04 13:45 +0800
categories:
  - Game Development
  - Unreal Engine
tags:
  - animation
---
有时候，重定向动画后，生成的重定向动画会有一些明显的错位等问题，这时候，打开骨骼树，将骨骼平移选项设置为 `Skeleton/骨骼` 大部分情况下能解决一些问题，那么这个选项的作用到底是什么

## 为什么使用动画重定向

游戏开发中，由于诸多限制，不会为每个角色都制作单独的动画，所以要进行动画的复用，让几个不同但骨骼结构类似的角色使用相同的动画，而在这种情况下，虽然骨骼相似，但是不同比例的角色使用一套动画，会出现角色被拉伸或压缩的情况，这种时候，就需要动画重定向

## 动画重定向做了什么

角色动画，就是一系列骨骼的旋转和位移，动画重定向，就是以指定的方式，将这些旋转和位移从一个骨骼，转移到另一个骨骼

这个 **指定的方式** 就是骨骼平移选项

## 骨骼平移选项

### Animation/动画

这块骨骼在源动画的描述中这个时间点应该在哪里，就把它放到哪里

举个不太贴切的例子，有一个动画，原先是用在身高一米九的角色身上，它指定在动画的每一秒，这个角色的头部骨骼应该都在一米八左右的位置，现在要将这个动画重定向到一个一米五的角色骨骼进行复用，如果选择头部和躯干骨骼平移选项为 Animation ，那么这个一米五的角色的头大概要跟肩膀 Say Goodbye 了，因为他的头会在一米八的位置

所以这个平移选项一般用于 Root 骨骼（控制角色实际移动，如果启动根运动），IK骨骼等

### Skeleton/骨骼

保持这块骨骼在骨骼树中的静态相对位置不变，忽略动画平移数据

动画重定向中的骨骼 **平移** 选项仅指定了对动画中骨骼平移数据的处理方式，而骨骼的 **旋转** 始终是按照动画指定的原本方式来的

所以，如果指定角色的手臂为骨骼模式，角色的手臂还是会根据动画来动的，手臂确实不会平移，但是会根据肩膀，肘部和手腕的动画来旋转

### AnimationScaled/缩放动画

使用动画中的平移数据，但是根据动画影响的源骨骼和目标骨骼的比例进行缩放

第一个例子中，一米五的角色的头现在会在正确的位置上了

不过，一般对脖子到头使用 Skeleton 选项就可以了，这个选项一般用在 Pelvis 上，使角色保持正确的高度

## 参考

[虚幻引擎动画重定位](https://dev.epicgames.com/documentation/zh-cn/unreal-engine/animation-retargeting-in-unreal-engine?application_version=5.3#howdoesretargetingwork?)